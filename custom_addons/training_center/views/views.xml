<odoo>
  <data>
    <record id="view_training_class_tree" model="ir.ui.view">
      <field name="name">training.class.tree</field>
      <field name="model">training.class</field>
      <field name="arch" type="xml">
        <tree decoration-info="state=='draft'" decoration-muted="state=='closed'" decoration-success="state=='open'" decoration-bf="state=='open'">
          <field name="name"/>
          <field name="subject_id"/>
          <field name="teacher_id"/>
          <field name="start_date"/>
          <field name="end_date"/>
          <field name="state" widget="badge"/>
          <field name="total_revenue"/>
        </tree>
      </field>
    </record>

    <record id="view_training_class_form" model="ir.ui.view">
      <field name="name">training.class.form</field>
      <field name="model">training.class</field>
      <field name="arch" type="xml">
        <form>
          <header>
            <button name="action_open_class" string="Mở lớp" type="object" class="btn-success" invisible="state != 'draft'"/>
            <button name="action_close_class" string="Đóng lớp" type="object" class="btn-danger" invisible="state != 'open'"/>
            <button name="action_set_draft" string="Đặt lại nháp" type="object" class="btn-default" invisible="state != 'closed'"/>
            <field name="state" widget="statusbar" statusbar_visible="draft,open,closed" options="{'clickable': true}"/>
          </header>
          <sheet>
            <div class="oe_title">
              <h1>
                <field name="name" placeholder="Ví dụ: Python K18"/>
              </h1>
            </div>
            <group>
              <group>
                <field name="subject_id" readonly="state == 'closed'"/>
                <field name="teacher_id" readonly="state == 'closed'"/>
              </group>
              <group>
                <field name="start_date" invisible="state == 'closed'"/>
                <field name="end_date" invisible="state == 'closed'"/>
              </group>
            </group>
            <group>
             <group>
                <field name="description"/>
              </group>
              <group>
                <field name="price_per_student"/>
                <field name="duration"/>
              </group>
              <!-- <group>
                <field name="state" invisible="1"/>
              </group> -->
            </group>

            <notebook>
              <page string="Danh sách Sinh viên">
                <field name="student_ids">
                  <tree>
                    <field name="name"/>
                    <field name="student_id"/>
                    <field name="email"/>
                  </tree>
                </field>
              </page>

              <page string="Lịch trình học">
                <field name="session_ids">
                  <tree editable="bottom">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="duration" sum="Tổng thời lượng"/>
                  </tree>
                </field>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <record id="view_training_class_search" model="ir.ui.view">
      <field name="name">training.class.search</field>
      <field name="model">training.class</field>
      <field name="arch" type="xml">
        <search>
          <field name="name"/>
          <field name="subject_id"/>
          <field name="teacher_id"/>
          <group expand="1" string="Group By">
            <filter string="Môn học" name="grp_subject" context="{'group_by': 'subject_id'}"/>
            <filter string="Giảng viên" name="grp_teacher" context="{'group_by': 'teacher_id'}"/>
          </group>
        </search>
      </field>
    </record>

  </data>
</odoo>